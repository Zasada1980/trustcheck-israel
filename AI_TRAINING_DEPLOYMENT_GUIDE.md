# ะะพะปะฝะฐั ะธะฝััััะบัะธั ะฟะพ ะพะฑััะตะฝะธั ะธ ัะฐะทะฒะตัััะฒะฐะฝะธั TrustCheck AI

## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะะพะดะณะพัะพะฒะบะฐ ะดะฐัะฐัะตัะฐ](#ัะฐะณ-1-ะฟะพะดะณะพัะพะฒะบะฐ-ะดะฐัะฐัะตัะฐ)
2. [ะะฑััะตะฝะธะต ะผะพะดะตะปะธ](#ัะฐะณ-2-ะพะฑััะตะฝะธะต-ะผะพะดะตะปะธ)
3. [ะญะบัะฟะพัั ะผะพะดะตะปะธ](#ัะฐะณ-3-ัะบัะฟะพัั-ะผะพะดะตะปะธ)
4. [ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตัะฒะตัะต](#ัะฐะณ-4-ัะฐะทะฒะตัััะฒะฐะฝะธะต-ะฝะฐ-ัะตัะฒะตัะต)
5. [ะะฝัะตะณัะฐัะธั ัะฐัะฐ ะฝะฐ ัะฐะนั](#ัะฐะณ-5-ะธะฝัะตะณัะฐัะธั-ัะฐัะฐ)
6. [ะขะตััะธัะพะฒะฐะฝะธะต](#ัะฐะณ-6-ัะตััะธัะพะฒะฐะฝะธะต)

---

## ะจะฐะณ 1: ะะพะดะณะพัะพะฒะบะฐ ะดะฐัะฐัะตัะฐ

### 1.1 ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ

```powershell
cd E:\SBF
pip install requests beautifulsoup4
```

### 1.2 ะะฐะฟัััะธัั ัะบัะธะฟั ะฟะพะดะณะพัะพะฒะบะธ ะดะฐะฝะฝัั

```powershell
python scripts/prepare_training_dataset.py
```

**ะงัะพ ะดะตะปะฐะตั ัะบัะธะฟั:**
- โ ะกะบะฐะฝะธััะตั ะฒัะต ัะฐะนะปั ะฟัะพะตะบัะฐ (.md, .ts, .sql, .py)
- โ ะะทะฒะปะตะบะฐะตั URL ะธะท ะดะพะบัะผะตะฝัะพะฒ
- โ ะะฐะณััะถะฐะตั ะบะพะฝัะตะฝั ะฒะฐะถะฝัั ัััะฐะฝะธั (data.gov.il, ica.justice.gov.il)
- โ ะกะพะทะดะฐะตั JSON ะดะฐัะฐัะตั ะฒ ัะพัะผะฐัะต Alpaca
- โ ะกะพััะฐะฝัะตั ะฒ `E:/LLaMA-Factory/data/trustcheck_knowledge_base.json`

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```
๐ ะะฐะฟะธัะตะน: ~300-500
๐พ ะะฐะทะผะตั: ~5-15 MB
๐ ะะฐัะตะณะพัะธะธ: project_files, external_webpages, faq
```

### 1.3 ะะฐัะตะณะธัััะธัะพะฒะฐัั ะดะฐัะฐัะตั ะฒ LLaMA Factory

```powershell
cd E:\LLaMA-Factory

# ะะพะฑะฐะฒะธัั ะฒ data/dataset_info.json
# (ะะปะธ ัะบะพะฟะธัะพะฒะฐัั ะธะท scripts/dataset_info_addition.json)
```

ะะพะฑะฐะฒะธัั ะฒ `data/dataset_info.json`:
```json
{
  "trustcheck_knowledge": {
    "file_name": "trustcheck_knowledge_base.json",
    "formatting": "alpaca",
    "columns": {
      "prompt": "instruction",
      "query": "input",
      "response": "output",
      "system": "system"
    }
  }
}
```

---

## ะจะฐะณ 2: ะะฑััะตะฝะธะต ะผะพะดะตะปะธ

### 2.1 ะะฐะฟัััะธัั LLaMA Board

```powershell
cd E:\LLaMA-Factory
llamaboard
```

**ะัะบัะพะตััั:** http://localhost:7860

### 2.2 ะะฐัััะพะธัั ะฟะฐัะฐะผะตััั ะพะฑััะตะฝะธั

**Train tab:**
- **Model name:** `Qwen/Qwen2.5-1.5B-Instruct` (ะธะปะธ ะดััะณะฐั ะผะพะดะตะปั)
- **Dataset:** `trustcheck_knowledge`
- **Learning rate:** `5e-5`
- **Epochs:** `3`
- **Batch size:** `4`
- **Max length:** `4096`
- **LoRA rank:** `8`
- **LoRA alpha:** `16`
- **Output dir:** `saves/trustcheck-ai`

### 2.3 ะะฐะฟัััะธัั ะพะฑััะตะฝะธะต

ะะฐะถะฐัั **Start** ะธ ะถะดะฐัั ~30-60 ะผะธะฝัั (ะทะฐะฒะธัะธั ะพั GPU).

**ะะพะฝะธัะพัะธะฝะณ:**
```powershell
# ะ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต
nvidia-smi -l 1

# ะัะพะฒะตัะธัั ะฟัะพะณัะตัั
Get-Content E:\LLaMA-Factory\train.log -Tail 20 -Wait
```

**ะฃัะฟะตัะฝะพะต ะทะฐะฒะตััะตะฝะธะต:**
```
Training completed!
Final loss: ~0.5-1.0
Model saved to: saves/trustcheck-ai/
```

---

## ะจะฐะณ 3: ะญะบัะฟะพัั ะผะพะดะตะปะธ

### 3.1 ะญะบัะฟะพััะธัะพะฒะฐัั ะฒ GGUF ัะพัะผะฐั

```powershell
cd E:\LLaMA-Factory

python -m llamafactory.cli export `
  --model_name_or_path saves/trustcheck-ai `
  --export_dir exports/trustcheck-ai `
  --export_size 4 `
  --export_device cpu `
  --export_legacy_format False
```

**ะะตะทัะปััะฐั:**
```
โ exports/trustcheck-ai/model.gguf
๐ฆ ะะฐะทะผะตั: ~1-3 GB (ะทะฐะฒะธัะธั ะพั ะผะพะดะตะปะธ)
```

### 3.2 ะัะพะฒะตัะธัั ัะบัะฟะพัั

```powershell
ls E:\LLaMA-Factory\exports\trustcheck-ai\

# ะะพะปะถะตะฝ ะฑััั ัะฐะนะป: model.gguf
```

---

## ะจะฐะณ 4: ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตัะฒะตัะต

### 4.1 ะะพะดะณะพัะพะฒะธัั ัะบัะธะฟั ะดะตะฟะปะพั

ะกะบัะธะฟั ัะถะต ัะพะทะดะฐะฝ: `scripts/deploy_ai_model.sh`

### 4.2 ะะฐะฟัััะธัั ัะฐะทะฒะตัััะฒะฐะฝะธะต

**ะงะตัะตะท Git Bash ะฝะฐ Windows:**
```bash
cd /e/SBF
bash scripts/deploy_ai_model.sh
```

**ะงัะพ ะดะตะปะฐะตั ัะบัะธะฟั:**
1. โ ะัะพะฒะตััะตั ัะบัะฟะพััะธัะพะฒะฐะฝะฝัั ะผะพะดะตะปั
2. โ ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั Ollama ะฝะฐ ัะตัะฒะตัะต
3. โ ะะฐะณััะถะฐะตั ะผะพะดะตะปั ะฝะฐ ัะตัะฒะตั (ัะตัะตะท SCP)
4. โ ะะตะณะธัััะธััะตั ะผะพะดะตะปั ะฒ Ollama
5. โ ะะฐัััะฐะธะฒะฐะตั systemd service
6. โ ะะฐัััะฐะธะฒะฐะตั Nginx reverse proxy
7. โ ะขะตััะธััะตั API

**ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั:** ~10-15 ะผะธะฝัั (ะทะฐะฒะธัะธั ะพั ัะบะพัะพััะธ ะธะฝัะตัะฝะตัะฐ)

### 4.3 ะัะพะฒะตัะธัั ััะฐััั ะฝะฐ ัะตัะฒะตัะต

```bash
ssh -i C:/Users/zakon/.ssh/trustcheck_hetzner root@46.224.147.252

# ะัะพะฒะตัะธัั Ollama service
systemctl status ollama-trustcheck

# ะัะพะฒะตัะธัั ะผะพะดะตะปะธ
ollama list

# ะะพะปะถะฝะฐ ะฑััั: trustcheck-ai
```

---

## ะจะฐะณ 5: ะะฝัะตะณัะฐัะธั ัะฐัะฐ

### 5.1 ะะพะฑะฐะฒะธัั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะ `.env.local`:
```env
OLLAMA_API_URL=https://trustcheck.co.il/api/ai
```

### 5.2 ะะพะฑะฐะฒะธัั ะบะพะผะฟะพะฝะตะฝั ัะฐัะฐ ะฒ layout

**ะคะฐะนะป:** `app/layout.tsx`

```typescript
import AIChat from '@/components/AIChat';

export default function RootLayout({ children }) {
  return (
    <html lang="he" dir="rtl">
      <body>
        {children}
        <AIChat />  {/* ะะพะฑะฐะฒะธัั ััั ัััะพะบั */}
      </body>
    </html>
  );
}
```

### 5.3 ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ

```powershell
cd E:\SBF
npm install lucide-react
```

### 5.4 ะะตัะตัะพะฑัะฐัั ะธ ะทะฐะดะตะฟะปะพะธัั

```powershell
# ะะพะบะฐะปัะฝัะน ัะตัั
npm run dev

# ะัะพะฒะตัะธัั: http://localhost:3000
# ะะพะปะถะฝะฐ ะฟะพัะฒะธัััั ะบะฝะพะฟะบะฐ ัะฐัะฐ ะฒะฝะธะทั ัะปะตะฒะฐ

# ะะตะฟะปะพะน ะฝะฐ production
docker compose build --no-cache app
docker compose up -d app
```

---

## ะจะฐะณ 6: ะขะตััะธัะพะฒะฐะฝะธะต

### 6.1 ะขะตัั API ะฝะฐะฟััะผัั

```bash
curl https://trustcheck.co.il/api/ai \
  -H 'Content-Type: application/json' \
  -d '{
    "prompt": "ืื ืื TrustCheck Israel?",
    "stream": false
  }'
```

**ะะถะธะดะฐะตะผัะน ะพัะฒะตั:**
```json
{
  "response": "TrustCheck Israel ืืื ืคืืืคืืจืื ืืืืืงืช ืืืืืืช ืขืกืงืื ืืฉืจืืืื...",
  "model": "trustcheck-ai",
  "created_at": "2026-01-04T..."
}
```

### 6.2 ะขะตัั ัะตัะตะท UI

1. ะัะบัััั https://trustcheck.co.il
2. ะะฐะถะฐัั ะฝะฐ ะบะฝะพะฟะบั ัะฐัะฐ (ัะธะฝะธะน ะบััะถะพะบ ั ะธะบะพะฝะบะพะน ะฑะพัะฐ)
3. ะะฐะดะฐัั ะฒะพะฟัะพั: "ืื ืื TrustCheck?"
4. ะัะพะฒะตัะธัั ะพัะฒะตั ะฝะฐ ะธะฒัะธัะต

### 6.3 ะขะตัั ัะฐะทะปะธัะฝัั ััะตะฝะฐัะธะตะฒ

**ะะพะฟัะพัั ะดะปั ัะตััะธัะพะฒะฐะฝะธั:**
- "ืืื ืืืืืง ืืืจื?"
- "ืืื ืืกืืืื ืฉื ืขืกืงืื ืฉืืคืฉืจ ืืืืืง?"
- "ืืืืคื ืืชื ืืงืืืื ืืช ืืืชืืืื?"
- "ืืื ืขืืื ืฆืืื ืืืืื?"

---

## ๐ ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั

| ะะตััะธะบะฐ | ะฆะตะปั |
|---------|------|
| **ะะฐะทะผะตั ะผะพะดะตะปะธ** | 1-3 GB |
| **ะกะบะพัะพััั ะพัะฒะตัะฐ** | 1-3 ัะตะบัะฝะดั |
| **ะะฐัะตััะฒะพ ะธะฒัะธัะฐ** | ะงะธัะฐะตะผะพ, ะณัะฐะผะผะฐัะธัะตัะบะธ ะฒะตัะฝะพ |
| **ะขะพัะฝะพััั ะพัะฒะตัะพะฒ** | 80%+ ะฟัะฐะฒะธะปัะฝัั |
| **ะะพัััะฟะฝะพััั API** | 99.9% uptime |

---

## ๐ Troubleshooting

### ะัะพะฑะปะตะผะฐ: ะะฑััะตะฝะธะต ะฟะฐะดะฐะตั ั OOM (Out of Memory)

**ะะตัะตะฝะธะต:**
```yaml
# ะฃะผะตะฝััะธัั batch size ะฒ LLaMA Board:
batch_size: 2  # ะฒะผะตััะพ 4
gradient_accumulation: 2
```

### ะัะพะฑะปะตะผะฐ: ะะพะดะตะปั ะฝะต ะพัะฒะตัะฐะตั ะฝะฐ ะธะฒัะธัะต

**ะะตัะตะฝะธะต:**
```json
// ะะพะฑะฐะฒะธัั ะฑะพะปััะต ะฟัะธะผะตัะพะฒ ะฝะฐ ะธะฒัะธัะต ะฒ ะดะฐัะฐัะตั
// ะฃะฒะตะปะธัะธัั epochs ะดะพ 5
```

### ะัะพะฑะปะตะผะฐ: API ะฒะพะทะฒัะฐัะฐะตั 503

**ะะตัะตะฝะธะต:**
```bash
ssh root@46.224.147.252
systemctl restart ollama-trustcheck
journalctl -u ollama-trustcheck -f
```

### ะัะพะฑะปะตะผะฐ: ะงะฐั ะฝะต ะพัะบััะฒะฐะตััั ะฝะฐ ัะฐะนัะต

**ะะตัะตะฝะธะต:**
```typescript
// ะัะพะฒะตัะธัั console.log ะฒ ะฑัะฐัะทะตัะต
// ะัะพะฒะตัะธัั ััะพ AIChat ะธะผะฟะพััะธัะพะฒะฐะฝ ะฒ layout.tsx
// ะัะพะฒะตัะธัั ััะพ lucide-react ัััะฐะฝะพะฒะปะตะฝ
```

---

## โ ะงะตะบะปะธัั ะทะฐะฒะตััะตะฝะธั

- [ ] ะะฐัะฐัะตั ัะพะทะดะฐะฝ ะธ ะทะฐัะตะณะธัััะธัะพะฒะฐะฝ
- [ ] ะะพะดะตะปั ะพะฑััะตะฝะฐ (loss < 1.0)
- [ ] ะะพะดะตะปั ัะบัะฟะพััะธัะพะฒะฐะฝะฐ ะฒ GGUF
- [ ] ะะพะดะตะปั ัะฐะทะฒะตัะฝััะฐ ะฝะฐ ัะตัะฒะตัะต
- [ ] Ollama service ัะฐะฑะพัะฐะตั
- [ ] Nginx ะฝะฐัััะพะตะฝ
- [ ] API ะพัะฒะตัะฐะตั ะฝะฐ ัะตััั
- [ ] ะงะฐั ะบะพะผะฟะพะฝะตะฝั ะดะพะฑะฐะฒะปะตะฝ ะฝะฐ ัะฐะนั
- [ ] UI ัะฐัะฐ ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ
- [ ] ะัะฒะตัั ะฝะฐ ะธะฒัะธัะต ัะธัะฐะตะผัะต
- [ ] Production ะดะตะฟะปะพะน ะฒัะฟะพะปะฝะตะฝ

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- **LLaMA Factory docs:** https://github.com/hiyouga/LLaMA-Factory
- **Ollama docs:** https://ollama.ai/docs
- **Qwen2.5 model:** https://huggingface.co/Qwen/Qwen2.5-1.5B-Instruct

---

**ะะฒัะพั:** TrustCheck Development Team  
**ะะฐัะฐ:** 04.01.2026  
**ะะตััะธั:** 1.0
